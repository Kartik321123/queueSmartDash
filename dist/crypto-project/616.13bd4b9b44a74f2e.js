"use strict";(self.webpackChunkmaterial_pro_angular_lite=self.webpackChunkmaterial_pro_angular_lite||[]).push([[616],{5616:(lt,D,l)=>{l.r(D),l.d(D,{StrategyModule:()=>it});var u=l(4755),f=l(2480),Z=l(5861),h=l(9401),S=l(3276),T=l(5580),t=l(2223),y=l(6081),_=l(4004),p=l(3144);let w=(()=>{class a{constructor(e){this.http=e}allBots(e){const r=new p.WM({Authorization:`Bearer ${e.token}`});let s=(new p.LE).set("userId",e.userId).set("page",e.pageCount.page).set("limit",e.pageCount.limit);return e.botStatus&&(s=s.set("botStatus",e.botStatus)),this.http.get("https://api.cryptozack.com/algo-strategy/runtime-bots",{headers:r,params:s}).pipe((0,_.U)(g=>g.data))}activeBots(e){const r=new p.WM({Authorization:`Bearer ${e.token}`});let s=(new p.LE).set("userId",e.userId).set("page",e.pageCount.page).set("limit",e.pageCount.limit);return e.botStatus&&(s=s.set("botStatus",e.botStatus)),this.http.get("https://api.cryptozack.com/algo-strategy/runtime-bots",{headers:r,params:s}).pipe((0,_.U)(g=>g.data))}strategyTransaction(e){const r=new p.WM({Authorization:`Bearer ${e.token}`});let s=(new p.LE).set("userId",e.userId).set("id",e.botId);return this.http.get("https://api.cryptozack.com/wallet/get-strategy-trade",{headers:r,params:s}).pipe((0,_.U)(g=>g))}}return a.\u0275fac=function(e){return new(e||a)(t.LFG(p.eN))},a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var v=l(430),i=l(3627),x=l(3649);function A(a,o){1&a&&(t.TgZ(0,"div",16),t._UZ(1,"ngx-ui-loader",17),t.qZA()),2&a&&(t.xp6(1),t.Q6J("hasProgressBar",!1))}function N(a,o){1&a&&(t.TgZ(0,"th",18),t._uU(1,"Profit "),t.qZA())}const I=function(a){return{color:a}},M=function(a){return{display:a}};function O(a,o){if(1&a&&(t.TgZ(0,"td",19)(1,"span",20),t._uU(2),t.qZA(),t.TgZ(3,"span",21),t._uU(4,"(USDT)"),t.qZA()()),2&a){const e=o.$implicit;t.xp6(1),t.Q6J("ngStyle",t.VKq(3,I,e.usdtAmount>0?"green":"#687888")),t.xp6(1),t.Oqu(e.usdtAmount),t.xp6(1),t.Q6J("ngStyle",t.VKq(5,M,e.usdtAmount>0?"block":"none"))}}function P(a,o){1&a&&(t.TgZ(0,"th",18),t._uU(1,"Date & Time"),t.qZA())}function R(a,o){if(1&a&&(t.TgZ(0,"td",19),t._uU(1),t.ALo(2,"date"),t.qZA()),2&a){const e=o.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.createdAt,"MMMM dd, y , hh:mm:ss a")," ")}}function b(a,o){1&a&&t._UZ(0,"tr",22)}function Y(a,o){1&a&&t._UZ(0,"tr",23)}function Q(a,o){1&a&&(t.TgZ(0,"tr",24)(1,"td",25),t._uU(2,"No data Found "),t.qZA()())}let U=(()=>{class a{constructor(e,n,r,s,g){this.ngxService=e,this.activatedRoute=n,this.strategyService=r,this.navigateRouter=s,this.values=g,this.displayedColumns=["amount","time"],this.dataSource=[],this.showLoader=!1;let m=localStorage.getItem("userinfo");m&&(this.parseData=JSON.parse(m))}ngOnInit(){this.getTransactionDetails()}getTransactionDetails(){this.showLoader=!0,this.ngxService.start(),this.strategyService.strategyTransaction({token:this.parseData.token,userId:this.values.userId,botId:this.values.botId}).subscribe(n=>{this.dataSource=n.data.transaction,this.paginator=n.data.transaction.length;let r=0;for(const s of n.data.transaction)r+=s.usdtAmount||0;this.totalTransaction=r.toFixed(2),this.showLoader=!1})}pageChange(e){this.filter.pageCount.page=e.pageIndex+1,this.filter.pageCount.limit=e.pageSize}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(y.LA),t.Y36(f.gz),t.Y36(w),t.Y36(f.F0),t.Y36(T.WI))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-strategy-transaction"]],viewQuery:function(e,n){if(1&e&&t.Gf(S.NW,7),2&e){let r;t.iGM(r=t.CRH())&&(n.paginator=r.first)}},decls:24,vars:6,consts:[["class","ngxLoader",4,"ngIf"],[1,"main","flex-column-centered"],[1,"flex","header"],[1,"success"],[1,"usdt"],[1,"spacer"],["mat-dialog-close","","matTooltip","Close",1,"pointer"],[1,"table_container",2,"margin-top","10px"],["mat-table","",1,"dataTable",3,"dataSource"],["matColumnDef","amount"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","time"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","","class","cursor-pointer",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[1,"ngxLoader"],[3,"hasProgressBar"],["mat-header-cell",""],["mat-cell",""],[3,"ngStyle"],[1,"usdt",3,"ngStyle"],["mat-header-row",""],["mat-row","",1,"cursor-pointer"],[1,"mat-row"],["colspan","2",1,"pad-16",2,"text-align","center"]],template:function(e,n){1&e&&(t.YNc(0,A,2,1,"div",0),t.TgZ(1,"div",1)(2,"div",2)(3,"h3"),t._uU(4,"Strategy Total Transaction ("),t.TgZ(5,"span",3),t._uU(6),t.TgZ(7,"span",4),t._uU(8,"USDT"),t.qZA()(),t._uU(9,")"),t.qZA(),t._UZ(10,"div",5),t.TgZ(11,"mat-icon",6),t._uU(12,"close"),t.qZA()(),t.TgZ(13,"div",7)(14,"table",8),t.ynx(15,9),t.YNc(16,N,2,0,"th",10),t.YNc(17,O,5,7,"td",11),t.BQk(),t.ynx(18,12),t.YNc(19,P,2,0,"th",10),t.YNc(20,R,3,4,"td",11),t.BQk(),t.YNc(21,b,1,0,"tr",13),t.YNc(22,Y,1,0,"tr",14),t.YNc(23,Q,3,0,"tr",15),t.qZA()()()),2&e&&(t.Q6J("ngIf",n.showLoader),t.xp6(6),t.hij(" ",n.totalTransaction," "),t.xp6(8),t.Q6J("dataSource",n.dataSource),t.xp6(7),t.Q6J("matHeaderRowDef",n.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",n.displayedColumns))},dependencies:[u.O5,u.PC,y.Eo,T.ZT,v.Hw,i.BZ,i.fO,i.as,i.w1,i.Dz,i.nj,i.ge,i.ev,i.XQ,i.Gk,i.Ee,x.gM,u.uU],styles:[".main_container[_ngcontent-%COMP%]{padding:0 10px}.header[_ngcontent-%COMP%]{padding:10px}.header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#33475b;margin:0}.table_container[_ngcontent-%COMP%]{max-height:500px}.usdt[_ngcontent-%COMP%]{font-size:9px;font-weight:700}.ml-10[_ngcontent-%COMP%]{margin-left:10px}"]}),a})();var L=l(8097);function B(a,o){1&a&&(t.TgZ(0,"div",31),t._UZ(1,"ngx-ui-loader",32),t.qZA()),2&a&&(t.xp6(1),t.Q6J("hasProgressBar",!1))}function J(a,o){1&a&&(t.TgZ(0,"th",33),t._uU(1,"User Name "),t.qZA())}function k(a,o){if(1&a&&(t.TgZ(0,"td",34),t._uU(1),t.qZA()),2&a){const e=t.oxw();t.xp6(1),t.hij(" ",e.userName," ")}}function q(a,o){1&a&&(t.TgZ(0,"th",33),t._uU(1,"Profit"),t.qZA())}const C=function(a){return{color:a}},z=function(a){return{display:a}};function H(a,o){if(1&a&&(t.TgZ(0,"td",35)(1,"span",36),t._uU(2),t.qZA(),t.TgZ(3,"span",37),t._uU(4,"(USDT)"),t.qZA()()),2&a){const e=o.$implicit,n=t.oxw();t.xp6(1),t.Q6J("ngStyle",t.VKq(3,C,e.currentProfit>0?"green":"#687888")),t.xp6(1),t.hij(" ",n.formetValues(e.currentProfit)," "),t.xp6(1),t.Q6J("ngStyle",t.VKq(5,z,e.currentProfit>0?"block":"none"))}}function F(a,o){1&a&&(t.TgZ(0,"th",33),t._uU(1,"Status"),t.qZA())}function j(a,o){if(1&a&&(t.TgZ(0,"td",38),t._uU(1),t.qZA()),2&a){const e=o.$implicit;t.Q6J("ngStyle",t.VKq(2,C,"active"==e.botStatus?"green":"#FD354D")),t.xp6(1),t.hij(" ","active"==e.botStatus?"Active ":"Not Active"," ")}}function E(a,o){1&a&&(t.TgZ(0,"th",33),t._uU(1,"Created Date"),t.qZA())}function V(a,o){if(1&a&&(t.TgZ(0,"td",35),t._uU(1),t.ALo(2,"date"),t.qZA()),2&a){const e=o.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.createdAt,"MMMM dd, y , hh:mm:ss a")," ")}}function $(a,o){1&a&&(t.TgZ(0,"th",33),t._uU(1,"Action "),t.qZA())}function G(a,o){if(1&a){const e=t.EpF();t.TgZ(0,"td",35)(1,"mat-icon",39),t.NdJ("click",function(){const s=t.CHM(e).$implicit,g=t.oxw();return t.KtG(g.strategyTransaction(s.botId))}),t._uU(2," view_day"),t.qZA()()}}function K(a,o){1&a&&t._UZ(0,"tr",40)}function W(a,o){1&a&&t._UZ(0,"tr",41)}function X(a,o){1&a&&(t.TgZ(0,"tr",42)(1,"td",43),t._uU(2,"No data matching the filter "),t.qZA()())}const tt=function(){return[5,10,25,50,75,100]};var c=(()=>((c=c||{}).Last30Dayds="30Days",c.Last7Days="7Days",c.Today="today",c.Custom="custom",c.Next7Days="Next7Days",c.Next30Days="Next30Days",c.LastNext30Days="LastNext30Days",c))();const et=[{path:"",component:(()=>{class a{constructor(e,n,r,s,g){this.router=e,this.ngxService=n,this.navigateRouter=r,this.strategyService=s,this.matDialog=g,this.displayedColumns=["profit","status","signupDate","action"],this.dataSource=[],this.showLoader=!1,this.DateRangeEnum=c,this.SelectedDateRange=c.Last7Days,this.selectedDefaultValue=c.Last30Dayds,this.range=new h.cw({from:new h.NI,to:new h.NI}),this.router.queryParams.subscribe(d=>{d.userId&&(this.userId=d.userId,this.userName=d.user,this.status=d.status)});let m=localStorage.getItem("userinfo");m&&(this.parseData=JSON.parse(m))}ngOnInit(){var e=this;return(0,Z.Z)(function*(){yield e.allBotsList(),e.initializeFilter(),e.getDefaultData()})()}initializeFilter(){var e=new Date;e.setUTCHours(0,0,0,0);var n=new Date;n.setUTCHours(23,59,59,999);const r={token:this.parseData.token,pageCount:{page:1,limit:5},dateRange:{from:e.toISOString(),to:n.toISOString()},filter:{text:""},userId:this.userId};"Active"==this.status&&(r.botStatus="active"),this.filter=r}getDefaultData(){this.selectionChange({value:this.selectedDefaultValue})}strategyLists(){this.showLoader=!0,this.ngxService.start(),this.strategyService.activeBots(this.filter).subscribe(e=>{console.log("strategyLists strategyLists",e),this.dataSource=e.results,this.totalLength=e.count,this.showLoader=!1},e=>{this.showLoader=!1})}formetValues(e){return 0!==e?e.toFixed(2):"0"}backToUser(){this.navigateRouter.navigate(["/admin/client"])}selectionChange(e){const n=e.value;if(n===c.Last30Dayds){var r=new Date,s=new Date,g=new Date(s.getTime()-2592e6);g.setUTCHours(23,59,59,999),this.filter.dateRange={from:g.toISOString(),to:r.toISOString()},this.strategyLists()}else if(n===c.Last7Days){r=new Date,s=new Date;var m=new Date(s.getTime()-6048e5);m.setUTCHours(23,59,59,999),this.filter.dateRange={from:m.toISOString(),to:r.toISOString()},this.strategyLists()}else if(n===c.Today){(r=new Date).setUTCHours(0,0,0,0);var d=new Date;d.setUTCHours(23,59,59,999),this.filter.dateRange={from:r.toISOString(),to:d.toISOString()},this.strategyLists()}}dateRangeChange(e,n){if(this.range&&this.range.value&&this.range.value.to){const r=this.range.value.to||new Date(e.value),s=this.range.value.from||new Date(n.value);s.setUTCHours(23,59,59,999),this.filter.dateRange={from:new Date(s).toISOString(),to:new Date(r).toISOString()},this.strategyLists()}}getCustomOptiontext(){if(this.range&&this.range.value&&(this.range.value.to||this.range.value.from)){let e=this.range.value.to||new Date,n=this.range.value.from||new Date;return e=new u.uU("en-US").transform(e,"longDate"),n=new u.uU("en-US").transform(n,"longDate"),`${n} - ${e}`}return"Custom"}pageChange(e){this.filter.pageCount.page=e.pageIndex+1,this.filter.pageCount.limit=e.pageSize,this.strategyLists()}allBotsList(){var e=this;return(0,Z.Z)(function*(){const n={token:e.parseData.token,pageCount:{page:1,limit:Number.MAX_SAFE_INTEGER},filter:{text:""},userId:e.userId};"Active"==e.status&&(n.botStatus="active");try{const r=yield e.strategyService.allBots(n).toPromise();let s=0;for(const g of r.results)s+=g.currentProfit||0;e.totalProfit=0!==s?s.toFixed(2):"0"}catch{}})()}strategyTransaction(e){this.matDialog.open(U,{width:"700px",data:{userId:this.userId,user:this.userName,botId:e,status:this.status}})}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(f.gz),t.Y36(y.LA),t.Y36(f.F0),t.Y36(w),t.Y36(T.uw))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-strategy-list"]],viewQuery:function(e,n){if(1&e&&t.Gf(S.NW,7),2&e){let r;t.iGM(r=t.CRH())&&(n.paginator=r.first)}},inputs:{SelectedDateRange:"SelectedDateRange"},decls:50,vars:17,consts:[["class","ngxLoader",4,"ngIf"],[1,"main_container"],[1,"flex","pad-8","header"],[1,"flex",2,"align-items","center"],["matTooltip","Back To User",1,"back_arrow",3,"click"],[1,"heading","capital"],[1,"spacer"],[1,"search"],["matInput","","placeholder","Search...",1,"searchInput"],["input",""],[1,"searchIcon"],[1,"user_details"],[1,"detail"],[1,"para_value",3,"ngStyle"],[1,"para_heading"],[1,"usdt"],[2,"margin-top","10px"],["mat-table","",1,"dataTable",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","capital",4,"matCellDef"],["matColumnDef","profit"],["mat-cell","",4,"matCellDef"],["matColumnDef","status"],["mat-cell","",3,"ngStyle",4,"matCellDef"],["matColumnDef","signupDate"],["matColumnDef","action"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","cursor-pointer",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["pageSize","5",1,"pagination",3,"length","pageSizeOptions","page"],[1,"ngxLoader"],[3,"hasProgressBar"],["mat-header-cell",""],["mat-cell","",1,"capital"],["mat-cell",""],[3,"ngStyle"],[1,"usdt",3,"ngStyle"],["mat-cell","",3,"ngStyle"],["matTooltip","View Transaction Details",1,"pointer",3,"click"],["mat-header-row",""],["mat-row","",1,"cursor-pointer"],[1,"mat-row"],["colspan","4",1,"pad-16",2,"text-align","center"]],template:function(e,n){1&e&&(t.YNc(0,B,2,1,"div",0),t.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"mat-icon",4),t.NdJ("click",function(){return n.backToUser()}),t._uU(5,"arrow_back"),t.qZA(),t.TgZ(6,"p",5),t._uU(7),t.qZA()(),t._UZ(8,"div",6),t.TgZ(9,"div",7),t._UZ(10,"input",8,9),t.TgZ(12,"mat-icon",10),t._uU(13,"search"),t.qZA()()(),t.TgZ(14,"div",11)(15,"div",12)(16,"p",13),t._uU(17),t.qZA(),t.TgZ(18,"p",14),t._uU(19,"Total Profit "),t.TgZ(20,"span",15),t._uU(21,"(USDT)"),t.qZA()()(),t.TgZ(22,"div",12)(23,"p",13),t._uU(24),t.qZA(),t.TgZ(25,"p",14),t._uU(26,"Today Profit "),t.TgZ(27,"span",15),t._uU(28,"(USDT)"),t.qZA()()()(),t.TgZ(29,"div",16)(30,"table",17),t.ynx(31,18),t.YNc(32,J,2,0,"th",19),t.YNc(33,k,2,1,"td",20),t.BQk(),t.ynx(34,21),t.YNc(35,q,2,0,"th",19),t.YNc(36,H,5,7,"td",22),t.BQk(),t.ynx(37,23),t.YNc(38,F,2,0,"th",19),t.YNc(39,j,2,4,"td",24),t.BQk(),t.ynx(40,25),t.YNc(41,E,2,0,"th",19),t.YNc(42,V,3,4,"td",22),t.BQk(),t.ynx(43,26),t.YNc(44,$,2,0,"th",19),t.YNc(45,G,3,0,"td",22),t.BQk(),t.YNc(46,K,1,0,"tr",27),t.YNc(47,W,1,0,"tr",28),t.YNc(48,X,3,0,"tr",29),t.qZA(),t.TgZ(49,"mat-paginator",30),t.NdJ("page",function(s){return n.pageChange(s)}),t.qZA()()()),2&e&&(t.Q6J("ngIf",n.showLoader),t.xp6(7),t.AsE(" ",n.userName," ",n.status," Strategys"),t.xp6(9),t.Q6J("ngStyle",t.VKq(12,C,n.totalProfit>0?"green":"687888")),t.xp6(1),t.Oqu(n.totalProfit||0),t.xp6(6),t.Q6J("ngStyle",t.VKq(14,C,n.todayProfit>0?"green":"687888")),t.xp6(1),t.Oqu(n.todayProfit||0),t.xp6(6),t.Q6J("dataSource",n.dataSource),t.xp6(16),t.Q6J("matHeaderRowDef",n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.displayedColumns),t.xp6(2),t.Q6J("length",n.totalLength)("pageSizeOptions",t.DdM(16,tt)))},dependencies:[u.O5,u.PC,y.Eo,v.Hw,L.Nt,i.BZ,i.fO,i.as,i.w1,i.Dz,i.nj,i.ge,i.ev,i.XQ,i.Gk,i.Ee,S.NW,x.gM,u.uU],styles:[".main_container[_ngcontent-%COMP%]{padding:0 10px}.back_arrow[_ngcontent-%COMP%]:hover{color:#1e88e5;cursor:pointer}.usdt[_ngcontent-%COMP%]{font-size:9px;font-weight:700}.user_details[_ngcontent-%COMP%]{width:100%;margin-top:15px;display:grid;grid-template-columns:50% 50%;gap:8px;border-radius:4px}.user_details[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]{margin-right:10px;background-color:#fff;box-shadow:#0000003d 0 2px 5px;text-align:center;padding:25px;border-radius:4px}.para_value[_ngcontent-%COMP%]{font-size:35px;font-weight:600;margin:0;color:#33475b}.para_heading[_ngcontent-%COMP%]{color:#687888;font-size:17px;font-weight:500;margin:0}"]}),a})()},{path:"str_transaction",component:U}];let at=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[f.Bz.forChild(et),f.Bz]}),a})();var nt=l(9114),ot=l(9383),rt=l(787),st=l(8280);let it=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[u.ez,at,h.u5,h.UX,y.Js,T.Is,nt.lN,v.Ps,L.c,i.p0,S.TU,ot.g0,x.AV,rt.LD,st.FA]}),a})()}}]);