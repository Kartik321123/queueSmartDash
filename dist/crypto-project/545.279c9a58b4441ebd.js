"use strict";(self.webpackChunkmaterial_pro_angular_lite=self.webpackChunkmaterial_pro_angular_lite||[]).push([[545],{3545:(E,b,i)=>{i.r(b),i.d(b,{BannerModule:()=>j});var u=i(4755),C=i(2480),l=i(9401),w=i(1634),d=i(5580),t=i(2223),M=i(4004),g=i(2548),O=i(3144);let B=(()=>{class o{constructor(e){this.http=e}getbanner(){return this.http.get(`${g.ij.LIVE_URL}/user-account/banner`).pipe((0,M.U)(n=>n))}upload(e){return this.http.post(`${g.ij.LIVE_URL}/user-account/banner`,{imageLink:e.image,text:e.text,link:e.link})}delete(e){return this.http.post(`${g.ij.LIVE_URL}/user-account/banner-delete`,{id:e})}update(e,n){const a=`${g.ij.LIVE_URL}/user-account/banner`,s={id:n,imageLink:e.image,text:e.text,link:e.link};return console.log(s),this.http.put(a,s)}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(O.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var p=i(6081),f=i(2342),h=i(1728),m=i(9114),_=i(8097),x=i(430),v=i(3649),Z=i(9383);function L(o,r){if(1&o&&(t.TgZ(0,"div",15),t._UZ(1,"img",16),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("src",e.previousImageUrl,t.LSH)}}function y(o,r){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"Image file is required"),t.qZA())}function P(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"button",17),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.updateBanner())}),t._uU(1,"Update"),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("disabled",!e.form.valid||!e.file)}}function S(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"button",17),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.upload())}),t._uU(1,"Upload"),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("disabled",!e.form.valid||!e.file)}}let U=(()=>{class o{constructor(e,n,a,s,c,Q){this.data=e,this.bannerService=n,this.fb=a,this.ngxService=s,this.dialogRef=c,this._snackBar=Q,this.form=new l.cw({text:new l.NI("",l.kI.required),link:new l.NI("")}),this.showLoader=!1,this.base64Image=null}ngOnInit(){this.setFormValue()}setFormValue(){"update"==this.data.mode&&(this.form.patchValue({text:this.data.bannerData.text}),this.form.patchValue({link:this.data.bannerData.link}),this.previousImageUrl=this.data.bannerData.imageLink)}onFileSelected(e){console.log(e);const n=e.target.files[0];if(n){this.file=n;const a=new FileReader;a.readAsDataURL(n),a.onload=()=>{this.base64Image=a.result},a.onerror=s=>{console.error("Error: ",s)}}}upload(){if(this.showLoader=!0,this.ngxService.start(),this.form.valid&&this.base64Image){const e={image:this.base64Image,text:this.form.get("text")?.value,link:this.form.get("link")?.value};this.bannerService.upload(e).subscribe(n=>{n&&(console.log(n),this.form.reset(),this.file=null,this.base64Image=null,this._snackBar.open("Banner Uploaded Successfully","Close",{duration:3e3,verticalPosition:"bottom",horizontalPosition:"center"}),this.dialogRef.close())},n=>{console.error("Error uploading banner:",n)})}else console.error("Form is invalid or no file selected")}updateBanner(){if(this.ngxService.start(),this.form.valid&&this.base64Image){const e={image:this.base64Image,text:this.form.get("text")?.value,link:this.form.get("link")?.value};this.bannerService.update(e,this.data.bannerId).subscribe(n=>{console.log(n),n&&(this.dialogRef.close(),this.form.reset(),this.file=null,this.base64Image=null,this._snackBar.open("Banner Updated Succesfully","Close",{duration:5e3,verticalPosition:"bottom",horizontalPosition:"center"}))},n=>{console.error("Error uploading banner:",n)})}else console.error("Form is invalid or no file selected")}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(d.WI),t.Y36(B),t.Y36(l.qu),t.Y36(p.LA),t.Y36(d.so),t.Y36(f.ux))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-update-banner"]],decls:24,vars:6,consts:[[1,"heading"],["mat-dialog-close","","matTooltip","close",1,"mat-icon"],[1,"main_container"],[1,"flex","pad-8","header"],[1,"input-card"],[2,"width","100%","max-width","400px",3,"formGroup"],["class","image-preview",4,"ngIf"],[1,"file-input"],["type","file","id","fileUpload","required","",3,"change"],[4,"ngIf"],["appearance","outline",1,"input"],["matInput","","formControlName","text"],["matInput","","formControlName","link"],[1,"btn"],["class","btn-style","mat-flat-button","",3,"disabled","click",4,"ngIf"],[1,"image-preview"],["alt","Previous Image",1,"preview-image",3,"src"],["mat-flat-button","",1,"btn-style",3,"disabled","click"]],template:function(e,n){1&e&&(t.TgZ(0,"mat-toolbar",0)(1,"span"),t._uU(2),t.qZA(),t.TgZ(3,"mat-icon",1),t._uU(4,"close"),t.qZA()(),t.TgZ(5,"div",2),t._UZ(6,"div",3),t.TgZ(7,"div",4)(8,"form",5),t.YNc(9,L,2,1,"div",6),t.TgZ(10,"div",7)(11,"input",8),t.NdJ("change",function(s){return n.onFileSelected(s)}),t.qZA(),t.YNc(12,y,2,0,"mat-error",9),t.qZA(),t.TgZ(13,"mat-form-field",10)(14,"mat-label"),t._uU(15,"Text"),t.qZA(),t._UZ(16,"input",11),t.qZA(),t.TgZ(17,"mat-form-field",10)(18,"mat-label"),t._uU(19,"Link"),t.qZA(),t._UZ(20,"input",12),t.qZA(),t.TgZ(21,"div",13),t.YNc(22,P,2,1,"button",14),t.YNc(23,S,2,1,"button",14),t.qZA()()()()),2&e&&(t.xp6(2),t.Oqu("create"==n.data.mode?"Upload Banner":"Update Banner"),t.xp6(6),t.Q6J("formGroup",n.form),t.xp6(1),t.Q6J("ngIf","update"==n.data.mode&&n.previousImageUrl),t.xp6(3),t.Q6J("ngIf",!n.file),t.xp6(10),t.Q6J("ngIf","update"==n.data.mode),t.xp6(1),t.Q6J("ngIf","create"==n.data.mode))},dependencies:[u.O5,h.lW,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u,m.KE,m.hX,m.TO,_.Nt,x.Hw,d.ZT,v.gM,Z.Ye],styles:[".heading[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;background-color:#1e88e5;color:#fff}.main_container[_ngcontent-%COMP%]{padding:0 10px}.file-input[_ngcontent-%COMP%]{position:relative;left:112px}.mat-icon[_ngcontent-%COMP%]{cursor:pointer}.image-preview[_ngcontent-%COMP%]{text-align:center;margin-bottom:16px}.preview-image[_ngcontent-%COMP%]{max-width:100%;height:auto;border-radius:8px;box-shadow:0 2px 4px #0000001a}.input-card[_ngcontent-%COMP%]{overflow:hidden;display:flex;flex-direction:column;align-items:center;overflow-x:hidden;margin-top:10px;margin-bottom:10px}.btn[_ngcontent-%COMP%]{display:flex;justify-content:center}.btn-style[_ngcontent-%COMP%]{background-color:#1e88e5;color:#fff}"]}),o})();var T=i(6012),I=i(787),A=i(1217);function k(o,r){1&o&&(t.TgZ(0,"div",12),t._UZ(1,"ngx-ui-loader",13),t.qZA()),2&o&&(t.xp6(1),t.Q6J("hasProgressBar",!1))}function J(o,r){if(1&o&&(t.TgZ(0,"mat-option",14),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}function F(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div",15),t._UZ(1,"img",16),t.TgZ(2,"mat-icon",17),t.NdJ("click",function(){const s=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.deleteBanner(s.id))}),t._uU(3,"close"),t.qZA(),t.TgZ(4,"div",18)(5,"p")(6,"b"),t._uU(7,"Text: "),t.qZA(),t._uU(8),t.qZA(),t.TgZ(9,"p")(10,"b"),t._uU(11,"Link: "),t.qZA(),t._uU(12),t.qZA()(),t.TgZ(13,"div",19)(14,"button",20),t.NdJ("click",function(){const s=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.updateBanner(s))}),t._uU(15,"Update"),t.qZA()()()}if(2&o){const e=r.$implicit;t.xp6(1),t.Q6J("src",e.imageLink,t.LSH),t.xp6(7),t.Oqu(e.text),t.xp6(4),t.hij("",e.link," ")}}const N=[{path:"",component:(()=>{class o{constructor(e,n,a,s,c){this.bannerService=e,this.fb=n,this.ngxService=a,this._snackBar=s,this.matdailog=c,this.form=new l.cw({text:new l.NI("",l.kI.required),link:new l.NI("")}),this.data=[],this.showLoader=!1,this.base64Image=null,this.options=["external","internal"]}ngOnInit(){this.getBanner()}getBanner(){this.showLoader=!0,this.ngxService.start(),this.bannerService.getbanner().subscribe(e=>{this.data=e.data.results,this.showLoader=!1,this.ngxService.stop()},e=>{console.error("Error fetching banner:",e)})}onFileSelected(e){const n=e.target.files[0];if(n){this.file=n;const a=new FileReader;a.readAsDataURL(n),a.onload=()=>{this.base64Image=a.result},a.onerror=s=>{console.error("Error: ",s)}}}deleteBanner(e){this.matdailog.open(w.w,{width:"400px"}).afterClosed().subscribe(a=>{a&&this._deleteBanner(e)})}_deleteBanner(e){this.showLoader=!0,this.ngxService.start(),this.bannerService.delete(e).subscribe(n=>{console.log(n),n&&(this._snackBar.open(n.data.message,"Close",{duration:5e3,verticalPosition:"bottom",horizontalPosition:"center"}),this.getBanner(),this.showLoader=!1,this.ngxService.stop())})}updateBanner(e){console.log("banner",e),this.matdailog.open(U,{data:{bannerData:e,mode:"update"},height:"auto",width:"500px"}).afterClosed().subscribe(()=>{this.showLoader=!0,this.ngxService.start(),this.getBanner(),this.ngxService.stop(),this.showLoader=!1})}openUpload(){this.matdailog.open(U,{data:{mode:"create"}}).afterClosed().subscribe(()=>{this.showLoader=!0,this.ngxService.start(),this.getBanner(),this.ngxService.stop(),this.showLoader=!1})}onSelectionChange(e){console.log(e)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(B),t.Y36(l.qu),t.Y36(p.LA),t.Y36(f.ux),t.Y36(d.uw))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-banner"]],decls:15,vars:3,consts:[["class","ngxLoader",4,"ngIf"],[1,"main_container"],[1,"flex","pad-8","header"],[1,"heading"],[1,"spacer"],[1,"select-box","visitor-select-box","dropdown"],["placeholder","Select an option",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],[1,"mt-30"],["mat-button","",1,"upload-button",3,"click"],[1,"container"],["class","card",4,"ngFor","ngForOf"],[1,"ngxLoader"],[3,"hasProgressBar"],[3,"value"],[1,"card"],["mat-card-image","","alt","...",1,"mat-card-image",3,"src"],["matTooltip","Delete banner",1,"deleteButton",3,"click"],[1,"card-content"],[1,"button-container"],["mat-flat-button","","color","primary",3,"click"]],template:function(e,n){1&e&&(t.YNc(0,k,2,1,"div",0),t.TgZ(1,"div",1)(2,"div",2)(3,"p",3),t._uU(4,"Banner "),t.qZA(),t._UZ(5,"div",4),t.TgZ(6,"div",5)(7,"mat-select",6),t.NdJ("selectionChange",function(s){return n.onSelectionChange(s.value)}),t.YNc(8,J,2,2,"mat-option",7),t.qZA()(),t.TgZ(9,"div",8)(10,"button",9),t.NdJ("click",function(){return n.openUpload()}),t.TgZ(11,"span"),t._uU(12,"Upload Banner"),t.qZA()()()(),t.TgZ(13,"div",10),t.YNc(14,F,16,3,"div",11),t.qZA()()),2&e&&(t.Q6J("ngIf",n.showLoader),t.xp6(8),t.Q6J("ngForOf",n.options),t.xp6(6),t.Q6J("ngForOf",n.data))},dependencies:[u.sg,u.O5,h.lW,T.G2,p.Eo,x.Hw,v.gM,I.gD,A.ey],styles:[".input-card[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;margin-top:10px}.heading[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.main_container[_ngcontent-%COMP%]{padding:0 10px}.file-input[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:16px;width:100%;max-width:400px;justify-content:center;align-items:center}.file-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-left:70px}.container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:10px;padding:10px}.card[_ngcontent-%COMP%]{position:relative;background-color:#fff;border:1px solid #ccc;border-radius:5px;display:flex;flex-direction:column;justify-content:space-between}.mat-card-image[_ngcontent-%COMP%]{width:100%;height:auto;object-fit:cover}.card-content[_ngcontent-%COMP%]{flex-grow:1}.card-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding-left:5px}.button-container[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:10px 0}.deleteButton[_ngcontent-%COMP%]{position:absolute;top:0;right:0;font-size:24px;cursor:pointer;background-color:red;color:#fff}.mt-30[_ngcontent-%COMP%]{margin-top:30px}.upload-button[_ngcontent-%COMP%]{border:1px solid #CCCBCB;width:auto;border-radius:3px;background-color:#fff;color:#635d5d;font-weight:600;margin-left:0;height:36px;cursor:pointer;padding:10px}.dropdown[_ngcontent-%COMP%]{margin-top:32px;margin-right:17px}"]}),o})()}];let Y=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[C.Bz.forChild(N),C.Bz]}),o})();var R=i(5815);let j=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[u.ez,Y,h.ot,l.UX,m.lN,_.c,T.QW,p.Js,x.Ps,R.N6,p.Js,d.Is,v.AV,Z.g0,f.ZX,I.LD]}),o})()}}]);