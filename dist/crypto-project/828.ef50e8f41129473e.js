"use strict";(self.webpackChunkmaterial_pro_angular_lite=self.webpackChunkmaterial_pro_angular_lite||[]).push([[828],{7828:(j,S,i)=>{i.r(S),i.d(S,{SupportModule:()=>B});var g=i(4755),x=i(2480),m=i(5861),d=i(3276),C=i(5580),t=i(2223),f=i(3144),v=i(4004);let y=(()=>{class o{constructor(e){this.http=e}getsupportData(e){const r=new f.WM({Authorization:`Bearer ${e.token}`}),p=(new f.LE).set("page",e.page).set("limit",e.limit);return this.http.get("https://api.cryptozack.com/user-account/list-support",{headers:r,params:p}).pipe((0,v.U)(l=>l))}postSupportTicket(e){return this.http.post("https://api.cryptozack.com/user-account/support-reply",e)}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(f.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var u=i(9401),_=i(8097),Z=i(9114);const D=function(o,a){return{left:o,right:a}};function w(o,a){if(1&o&&(t.TgZ(0,"div",7)(1,"div",8),t._uU(2),t.qZA()()),2&o){const e=a.$implicit,n=t.oxw();t.Q6J("ngClass",t.WLB(2,D,n.isIssue(e),!n.isIssue(e))),t.xp6(2),t.Oqu(e.message)}}let M=(()=>{class o{constructor(e,n){this.supportService=e,this.values=n,this.newTicketIssue="",this.chatData=[];let r=localStorage.getItem("userinfo");r&&(this.parseData=JSON.parse(r))}ngOnInit(){this.getData()}getData(){var e=this;return(0,m.Z)(function*(){yield e.getSupport()})()}getSupport(){var e=this;return(0,m.Z)(function*(){try{const n={token:e.parseData.token,page:1,limit:10},r=yield e.supportService.getsupportData(n).toPromise(),p=r.data.results[0].issue,l=r.data.results[0].replies;for(let c=0;c<Math.max(p.length,l.length);c++)p[c]&&c!==p.length-1&&e.chatData.push({type:"issue",message:p[c]}),l[c]&&c!==l.length-1&&e.chatData.push({type:"reply",message:l[c]})}catch(n){console.error(n)}})()}submitTicket(){var e=this;return(0,m.Z)(function*(){try{const n={supportId:e.values.supportId,replies:e.newTicketIssue};console.log(n);const r=yield e.supportService.postSupportTicket(n).toPromise();console.log("Ticket submitted:",r)}catch(n){console.log(n)}})()}isIssue(e){return"issue"===e.type}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(y),t.Y36(C.WI))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-reply"]],decls:8,vars:2,consts:[[1,"chat-container"],["class","message",3,"ngClass",4,"ngFor","ngForOf"],[1,"form"],[1,"form-container",3,"ngSubmit"],["appearance","fill"],["matInput","","type","text","name","issue","placeholder","Reply",3,"ngModel","ngModelChange"],["mat-raised-button","","type","submit",1,"primary-button","submit-button",2,"background-color","#67757c"],[1,"message",3,"ngClass"],[1,"message-content"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.YNc(1,w,3,5,"div",1),t.qZA(),t.TgZ(2,"div",2)(3,"form",3),t.NdJ("ngSubmit",function(){return n.submitTicket()}),t.TgZ(4,"mat-form-field",4)(5,"input",5),t.NdJ("ngModelChange",function(p){return n.newTicketIssue=p}),t.qZA()(),t.TgZ(6,"button",6),t._uU(7,"Submit"),t.qZA()()()),2&e&&(t.xp6(1),t.Q6J("ngForOf",n.chatData),t.xp6(4),t.Q6J("ngModel",n.newTicketIssue))},dependencies:[g.mk,g.sg,u._Y,u.Fj,u.JJ,u.JL,u.On,u.F,_.Nt,Z.KE],styles:[".chat-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;max-width:400px;margin:20px auto}.message[_ngcontent-%COMP%]{margin:8px;padding:10px;border-radius:8px;max-width:70%;word-wrap:break-word}.left[_ngcontent-%COMP%]{align-self:flex-start;background-color:#f3f3f3}.right[_ngcontent-%COMP%]{align-self:flex-end;background-color:#1e88e5;color:#fff}.message-content[_ngcontent-%COMP%]{font-size:14px;padding:8px}.form-container[_ngcontent-%COMP%]{bottom:0;display:flex;justify-content:space-between;align-items:center}.form-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{position:sticky;top:1000px}.input-field[_ngcontent-%COMP%]{flex:1;padding:8px;border-radius:4px;border:1px solid #ccc;margin-right:10px}.submit-button[_ngcontent-%COMP%]{padding:8px 16px;border:none;color:#fff;height:50px;cursor:pointer;margin-bottom:25px}.form[_ngcontent-%COMP%]{position:fixed;bottom:0;width:500px;background-color:#f9f9f9;padding:10px;box-shadow:0 -2px 5px #0000001a}"]}),o})();var h=i(6081),s=i(3627),T=i(430);function N(o,a){1&o&&(t.TgZ(0,"div",18),t._UZ(1,"ngx-ui-loader",19),t.qZA()),2&o&&(t.xp6(1),t.Q6J("hasProgressBar",!1))}function O(o,a){1&o&&(t.TgZ(0,"th",20),t._uU(1,"Name "),t.qZA())}function A(o,a){if(1&o&&(t.TgZ(0,"td",21),t._uU(1),t.qZA()),2&o){const e=a.$implicit;t.xp6(1),t.AsE(" ",e.user.firstName," ",e.user.lastName," ")}}function k(o,a){1&o&&(t.TgZ(0,"th",20),t._uU(1,"Email"),t.qZA())}function b(o,a){if(1&o&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&o){const e=a.$implicit;t.xp6(1),t.hij(" ",e.user.email," ")}}function I(o,a){1&o&&(t.TgZ(0,"th",20),t._uU(1,"Title "),t.qZA())}function J(o,a){if(1&o&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&o){const e=a.$implicit;t.xp6(1),t.hij(" ",e.title," ")}}function R(o,a){1&o&&(t.TgZ(0,"th",20),t._uU(1," Reply"),t.qZA())}function Y(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"td",22)(1,"mat-icon",23),t.NdJ("click",function(){const p=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.reply(p))}),t._uU(2,"reply_all"),t.qZA()()}}function P(o,a){1&o&&t._UZ(0,"tr",24)}function U(o,a){1&o&&t._UZ(0,"tr",25)}function Q(o,a){1&o&&(t.TgZ(0,"tr",26)(1,"td",27),t._uU(2,"No data matching the filter "),t.qZA()())}const z=function(){return[15,25,50,75,100]},F=[{path:"",component:(()=>{class o{constructor(e,n,r){this.supportService=e,this.ngxService=n,this.matdialog=r,this.displayedColumns=["name","email","title","reply"],this.dataSource=[],this.showLoader=!1,this.newTicketIssue="";let p=localStorage.getItem("userinfo");p&&(this.parseData=JSON.parse(p))}ngOnInit(){this.initializeFilter(),this.getData()}getData(){var e=this;return(0,m.Z)(function*(){yield e.getSupport()})()}initializeFilter(){this.filter={token:this.parseData.token,page:1,limit:15}}getSupport(){var e=this;return(0,m.Z)(function*(){e.showLoader=!0,e.ngxService.start();try{const n=yield e.supportService.getsupportData(e.filter).toPromise();console.log(n),e.dataSource=n.data.results,e.Replies=n.data.results[0].issue[0],e.totalLength=n.data.count,console.log(e.Replies),console.log(n.data.results),e.showLoader=!1}catch{e.showLoader=!1}})()}pageChange(e){this.filter.page=e.pageIndex+1,this.filter.limit=e.pageSize,this.getSupport()}reply(e){this.matdialog.open(M,{width:"500px",maxHeight:"80vh",data:{supportId:e.id}})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(y),t.Y36(h.LA),t.Y36(C.uw))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-support"]],viewQuery:function(e,n){if(1&e&&t.Gf(d.NW,7),2&e){let r;t.iGM(r=t.CRH())&&(n.paginator=r.first)}},decls:24,vars:7,consts:[["class","ngxLoader",4,"ngIf"],[1,"main_container"],[1,"flex","pad-8","header"],[1,"heading"],[1,"spacer"],[2,"margin-top","10px"],["mat-table","",1,"dataTable",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","capital",4,"matCellDef"],["matColumnDef","email"],["mat-cell","",4,"matCellDef"],["matColumnDef","title"],["matColumnDef","reply"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","cursor-pointer",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["pageSize","15",1,"pagination",3,"length","pageSizeOptions","page"],[1,"ngxLoader"],[3,"hasProgressBar"],["mat-header-cell",""],["mat-cell","",1,"capital"],["mat-cell",""],[1,"pointer",3,"click"],["mat-header-row",""],["mat-row","",1,"cursor-pointer"],[1,"mat-row"],["colspan","5",1,"pad-16",2,"text-align","center"]],template:function(e,n){1&e&&(t.YNc(0,N,2,1,"div",0),t.TgZ(1,"div",1)(2,"div",2)(3,"p",3),t._uU(4,"Support "),t.qZA(),t._UZ(5,"div",4),t.qZA(),t.TgZ(6,"div",5)(7,"table",6),t.ynx(8,7),t.YNc(9,O,2,0,"th",8),t.YNc(10,A,2,2,"td",9),t.BQk(),t.ynx(11,10),t.YNc(12,k,2,0,"th",8),t.YNc(13,b,2,1,"td",11),t.BQk(),t.ynx(14,12),t.YNc(15,I,2,0,"th",8),t.YNc(16,J,2,1,"td",11),t.BQk(),t.ynx(17,13),t.YNc(18,R,2,0,"th",8),t.YNc(19,Y,3,0,"td",11),t.BQk(),t.YNc(20,P,1,0,"tr",14),t.YNc(21,U,1,0,"tr",15),t.YNc(22,Q,3,0,"tr",16),t.qZA(),t.TgZ(23,"mat-paginator",17),t.NdJ("page",function(p){return n.pageChange(p)}),t.qZA()()()),2&e&&(t.Q6J("ngIf",n.showLoader),t.xp6(7),t.Q6J("dataSource",n.dataSource),t.xp6(13),t.Q6J("matHeaderRowDef",n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.displayedColumns),t.xp6(2),t.Q6J("length",n.totalLength)("pageSizeOptions",t.DdM(6,z)))},dependencies:[g.O5,s.BZ,s.fO,s.as,s.w1,s.Dz,s.nj,s.ge,s.ev,s.XQ,s.Gk,s.Ee,d.NW,h.Eo,T.Hw],styles:[".main_container[_ngcontent-%COMP%]{padding:0 10px}"]}),o})()}];let L=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[x.Bz.forChild(F),x.Bz]}),o})(),B=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[g.ez,L,s.p0,d.TU,h.Js,u.u5,T.Ps,_.c]}),o})()}}]);