"use strict";(self.webpackChunkmaterial_pro_angular_lite=self.webpackChunkmaterial_pro_angular_lite||[]).push([[545],{3545:(R,B,i)=>{i.r(B),i.d(B,{BannerModule:()=>N});var u=i(4755),C=i(2480),r=i(9401),w=i(1634),d=i(5580),t=i(2223),I=i(4004),g=i(2548),L=i(3144);let U=(()=>{class o{constructor(e){this.http=e}getbanner(){return this.http.get(`${g.ij.LIVE_URL}/user-account/banner`).pipe((0,I.U)(n=>n))}upload(e){return this.http.post(`${g.ij.LIVE_URL}/user-account/banner`,{imageLink:e.image,text:e.text,link:e.link})}delete(e){return this.http.post(`${g.ij.LIVE_URL}/user-account/banner-delete`,{id:e})}update(e,n){const a=`${g.ij.LIVE_URL}/user-account/banner`,l={id:n,imageLink:e.image,text:e.text,link:e.link};return console.log(l),this.http.put(a,l)}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(L.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var p=i(6081),f=i(2342),h=i(1728),m=i(9114),Z=i(8097),x=i(6012),b=i(430),v=i(3649),_=i(9383);function M(o,s){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"Image file is required"),t.qZA())}function k(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",14),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.updateBanner())}),t._uU(1,"Update"),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("disabled",!e.form.valid||!e.file)}}function y(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",14),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.upload())}),t._uU(1,"Upload"),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("disabled",!e.form.valid||!e.file)}}let T=(()=>{class o{constructor(e,n,a,l,c,F){this.data=e,this.bannerService=n,this.fb=a,this.ngxService=l,this.dialogRef=c,this._snackBar=F,this.form=new r.cw({text:new r.NI("",r.kI.required),link:new r.NI("")}),this.showLoader=!1,this.base64Image=null}ngOnInit(){}onFileSelected(e){console.log(e);const n=e.target.files[0];if(n){this.file=n;const a=new FileReader;a.readAsDataURL(n),a.onload=()=>{this.base64Image=a.result},a.onerror=l=>{console.error("Error: ",l)}}}upload(){if(this.showLoader=!0,this.ngxService.start(),this.form.valid&&this.base64Image){const e={image:this.base64Image,text:this.form.get("text")?.value,link:this.form.get("link")?.value};this.bannerService.upload(e).subscribe(n=>{n&&(console.log(n),this.form.reset(),this.file=null,this.base64Image=null,this._snackBar.open("Banner Uploaded Successfully","Close",{duration:3e3,verticalPosition:"bottom",horizontalPosition:"center"}),this.dialogRef.close())},n=>{console.error("Error uploading banner:",n)})}else console.error("Form is invalid or no file selected")}updateBanner(){if(this.ngxService.start(),this.form.valid&&this.base64Image){const e={image:this.base64Image,text:this.form.get("text")?.value,link:this.form.get("link")?.value};this.bannerService.update(e,this.data.bannerId).subscribe(n=>{console.log(n),n&&(this.dialogRef.close(),this.form.reset(),this.file=null,this.base64Image=null,this._snackBar.open("Banner Updated Succesfully","Close",{duration:5e3,verticalPosition:"bottom",horizontalPosition:"center"}))},n=>{console.error("Error uploading banner:",n)})}else console.error("Form is invalid or no file selected")}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(d.WI),t.Y36(U),t.Y36(r.qu),t.Y36(p.LA),t.Y36(d.so),t.Y36(f.ux))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-update-banner"]],decls:26,vars:5,consts:[[1,"heading"],["mat-dialog-close","","matTooltip","close",1,"mat-icon"],[1,"main_container"],[1,"flex","pad-8","header"],[1,"input-card"],["appearance","outlined",1,"mat-card"],[2,"width","100%","max-width","400px",3,"formGroup"],[1,"file-input"],["type","file","id","fileUpload","required","",3,"change"],[4,"ngIf"],["appearance","outline",1,"input"],["matInput","","formControlName","text"],["matInput","","formControlName","link"],["style","background-color: #1e88e5; color: white; width: 100%; max-width: 400px; margin-top: 20px;","mat-flat-button","",3,"disabled","click",4,"ngIf"],["mat-flat-button","",2,"background-color","#1e88e5","color","white","width","100%","max-width","400px","margin-top","20px",3,"disabled","click"]],template:function(e,n){1&e&&(t.TgZ(0,"mat-toolbar",0)(1,"span"),t._uU(2),t.qZA(),t.TgZ(3,"mat-icon",1),t._uU(4,"close"),t.qZA()(),t.TgZ(5,"div",2),t._UZ(6,"div",3),t.TgZ(7,"div",4)(8,"mat-card",5)(9,"h3")(10,"b"),t._uU(11,"Upload Image "),t.qZA()(),t.TgZ(12,"form",6)(13,"div",7)(14,"input",8),t.NdJ("change",function(l){return n.onFileSelected(l)}),t.qZA(),t.YNc(15,M,2,0,"mat-error",9),t.qZA(),t.TgZ(16,"mat-form-field",10)(17,"mat-label"),t._uU(18,"Text"),t.qZA(),t._UZ(19,"input",11),t.qZA(),t.TgZ(20,"mat-form-field",10)(21,"mat-label"),t._uU(22,"Link"),t.qZA(),t._UZ(23,"input",12),t.qZA(),t.YNc(24,k,2,1,"button",13),t.YNc(25,y,2,1,"button",13),t.qZA()()()()),2&e&&(t.xp6(2),t.Oqu("create"==n.data.mode?"Upload Banner":"Update Banner"),t.xp6(10),t.Q6J("formGroup",n.form),t.xp6(3),t.Q6J("ngIf",!n.file),t.xp6(9),t.Q6J("ngIf","update"==n.data.mode),t.xp6(1),t.Q6J("ngIf","create"==n.data.mode))},dependencies:[u.O5,h.lW,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,m.KE,m.hX,m.TO,Z.Nt,x.a8,b.Hw,d.ZT,v.gM,_.Ye],styles:[".heading[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;background-color:#1e88e5;color:#fff}.main_container[_ngcontent-%COMP%]{padding:0 10px}.file-input[_ngcontent-%COMP%]{position:relative;left:112px}.mat-card[_ngcontent-%COMP%]{width:500px;height:380px;display:flex;flex-direction:column;align-items:center;overflow-x:hidden;margin-top:10px}.mat-icon[_ngcontent-%COMP%]{cursor:pointer}"]}),o})();function A(o,s){1&o&&(t.TgZ(0,"div",9),t._UZ(1,"ngx-ui-loader",10),t.qZA()),2&o&&(t.xp6(1),t.Q6J("hasProgressBar",!1))}function O(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",11),t._UZ(1,"img",12),t.TgZ(2,"mat-icon",13),t.NdJ("click",function(){const l=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.deleteBanner(l.id))}),t._uU(3,"close"),t.qZA(),t.TgZ(4,"div",14)(5,"p")(6,"b"),t._uU(7,"Text: "),t.qZA(),t._uU(8),t.qZA(),t.TgZ(9,"p")(10,"b"),t._uU(11,"Link: "),t.qZA(),t._uU(12),t.qZA()(),t.TgZ(13,"div",15)(14,"button",16),t.NdJ("click",function(){const l=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.updateBanner(l.id))}),t._uU(15,"Update"),t.qZA()()()}if(2&o){const e=s.$implicit;t.xp6(1),t.Q6J("src",e.imageLink,t.LSH),t.xp6(7),t.Oqu(e.text),t.xp6(4),t.hij("",e.link," ")}}const P=[{path:"",component:(()=>{class o{constructor(e,n,a,l,c){this.bannerService=e,this.fb=n,this.ngxService=a,this._snackBar=l,this.matdailog=c,this.form=new r.cw({text:new r.NI("",r.kI.required),link:new r.NI("")}),this.data=[],this.showLoader=!1,this.base64Image=null}ngOnInit(){this.getBanner()}getBanner(){this.showLoader=!0,this.ngxService.start(),this.bannerService.getbanner().subscribe(e=>{this.data=e.data.results,this.showLoader=!1,this.ngxService.stop()},e=>{console.error("Error fetching banner:",e)})}onFileSelected(e){const n=e.target.files[0];if(n){this.file=n;const a=new FileReader;a.readAsDataURL(n),a.onload=()=>{this.base64Image=a.result},a.onerror=l=>{console.error("Error: ",l)}}}deleteBanner(e){this.matdailog.open(w.w,{width:"400px"}).afterClosed().subscribe(a=>{a&&this._deleteBanner(e)})}_deleteBanner(e){this.showLoader=!0,this.ngxService.start(),this.bannerService.delete(e).subscribe(n=>{console.log(n),n&&(this._snackBar.open(n.data.message,"Close",{duration:5e3,verticalPosition:"bottom",horizontalPosition:"center"}),this.getBanner(),this.showLoader=!1,this.ngxService.stop())})}updateBanner(e){this.matdailog.open(T,{data:{bannerId:e,mode:"update"}}).afterClosed().subscribe(()=>{this.showLoader=!0,this.ngxService.start(),this.getBanner(),this.ngxService.stop(),this.showLoader=!1})}openUpload(){this.matdailog.open(T,{data:{mode:"create"}}).afterClosed().subscribe(()=>{this.showLoader=!0,this.ngxService.start(),this.getBanner(),this.ngxService.stop(),this.showLoader=!1})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(U),t.Y36(r.qu),t.Y36(p.LA),t.Y36(f.ux),t.Y36(d.uw))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-banner"]],decls:12,vars:2,consts:[["class","ngxLoader",4,"ngIf"],[1,"main_container"],[1,"flex","pad-8","header"],[1,"heading"],[1,"spacer"],[1,"mt-30"],["mat-button","",1,"upload-button",3,"click"],[1,"container"],["class","card",4,"ngFor","ngForOf"],[1,"ngxLoader"],[3,"hasProgressBar"],[1,"card"],["mat-card-image","","alt","...",1,"mat-card-image",3,"src"],["matTooltip","Delete banner",1,"deleteButton",3,"click"],[1,"card-content"],[1,"button-container"],["mat-flat-button","","color","primary",3,"click"]],template:function(e,n){1&e&&(t.YNc(0,A,2,1,"div",0),t.TgZ(1,"div",1)(2,"div",2)(3,"p",3),t._uU(4,"Banner "),t.qZA(),t._UZ(5,"div",4),t.TgZ(6,"div",5)(7,"button",6),t.NdJ("click",function(){return n.openUpload()}),t.TgZ(8,"span"),t._uU(9,"Upload Banner"),t.qZA()()()(),t.TgZ(10,"div",7),t.YNc(11,O,16,3,"div",8),t.qZA()()),2&e&&(t.Q6J("ngIf",n.showLoader),t.xp6(11),t.Q6J("ngForOf",n.data))},dependencies:[u.sg,u.O5,h.lW,x.G2,p.Eo,b.Hw,v.gM],styles:[".input-card[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;margin-top:10px}.heading[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.main_container[_ngcontent-%COMP%]{padding:0 10px}.file-input[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:16px;width:100%;max-width:400px;justify-content:center;align-items:center}.file-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-left:70px}.container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:10px;padding:10px}.card[_ngcontent-%COMP%]{position:relative;background-color:#fff;border:1px solid #ccc;border-radius:5px;display:flex;flex-direction:column;justify-content:space-between}.mat-card-image[_ngcontent-%COMP%]{width:100%;height:auto;object-fit:cover}.card-content[_ngcontent-%COMP%]{flex-grow:1}.card-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding-left:5px}.button-container[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:10px 0}.deleteButton[_ngcontent-%COMP%]{position:absolute;top:0;right:0;font-size:24px;cursor:pointer;background-color:red;color:#fff}.mt-30[_ngcontent-%COMP%]{margin-top:30px}.upload-button[_ngcontent-%COMP%]{border:1px solid #CCCBCB;width:auto;border-radius:3px;background-color:#fff;color:#635d5d;font-weight:600;margin-left:0;height:36px;cursor:pointer;padding:10px}"]}),o})()}];let S=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[C.Bz.forChild(P),C.Bz]}),o})();var J=i(5815);let N=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[u.ez,S,h.ot,r.UX,m.lN,Z.c,x.QW,p.Js,b.Ps,J.N6,p.Js,d.Is,v.AV,_.g0,f.ZX]}),o})()}}]);