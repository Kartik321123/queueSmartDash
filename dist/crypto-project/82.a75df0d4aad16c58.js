"use strict";(self.webpackChunkmaterial_pro_angular_lite=self.webpackChunkmaterial_pro_angular_lite||[]).push([[82],{5082:(k,h,o)=>{o.r(h),o.d(h,{WithdrawalRequestModule:()=>X});var c=o(4755),f=o(9401),m=o(6081),g=o(5580),v=o(9114),R=o(430),w=o(8097),i=o(3627),p=o(3276),x=o(9383),q=o(3649),C=o(2480),N=o(1634),t=o(2223),d=o(3144),T=o(4004),Z=o(2548);let A=(()=>{class e{constructor(a){this.http=a}getWithdrawalRequests(a){const s=`${Z.ij.LIVE_URL}/wallet/get-withdrawal-request`,l=new d.WM({Authorization:`Bearer ${a.token}`}),r=(new d.LE).set("page",a.page).set("limit",a.limit);return this.http.get(s,{headers:l,params:r}).pipe((0,T.U)(u=>u.data))}approveRequest(a){return this.http.post(`${Z.ij.LIVE_URL}/wallet/withdrawal-amount`,{requestId:a}).pipe((0,T.U)(r=>r))}}return e.\u0275fac=function(a){return new(a||e)(t.LFG(d.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var _=o(2018);function D(e,n){1&e&&(t.TgZ(0,"div",20),t._UZ(1,"ngx-ui-loader",21),t.qZA()),2&e&&(t.xp6(1),t.Q6J("hasProgressBar",!1))}function U(e,n){1&e&&(t.TgZ(0,"th",22),t._uU(1,"Name "),t.qZA())}function Y(e,n){if(1&e&&(t.TgZ(0,"td",23),t._uU(1),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.AsE(" ",a.user.firstName||"--"," ",a.lastName," ")}}function y(e,n){1&e&&(t.TgZ(0,"th",22),t._uU(1,"Email"),t.qZA())}function S(e,n){if(1&e&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.hij(" ",a.user.email||"--"," ")}}function W(e,n){1&e&&(t.TgZ(0,"th",22),t._uU(1,"Amount "),t.qZA())}function I(e,n){if(1&e&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.hij(" $ ",a.amount/1e6||"--"," ")}}function M(e,n){1&e&&(t.TgZ(0,"th",22),t._uU(1,"Status"),t.qZA())}function Q(e,n){1&e&&(t.TgZ(0,"span",27),t._uU(1," PENDING "),t.qZA())}function B(e,n){1&e&&(t.TgZ(0,"span"),t._uU(1,"ACCEPTED"),t.qZA())}function E(e,n){if(1&e&&(t.TgZ(0,"td",24),t.YNc(1,Q,2,0,"span",25),t.YNc(2,B,2,0,"ng-template",null,26,t.W1O),t.qZA()),2&e){const a=n.$implicit,s=t.MAs(3);t.xp6(1),t.Q6J("ngIf","PENDING"===a.status)("ngIfElse",s)}}function L(e,n){1&e&&(t.TgZ(0,"th",22),t._uU(1,"Date & Time "),t.qZA())}function z(e,n){if(1&e&&(t.TgZ(0,"td",24),t._uU(1),t.ALo(2,"date"),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,a.createdAt,"MMMM dd, y , hh:mm:ss a")," ")}}function J(e,n){1&e&&(t.TgZ(0,"th",22),t._uU(1,"Action "),t.qZA())}function $(e,n){if(1&e){const a=t.EpF();t.ynx(0),t.TgZ(1,"mat-icon",29),t.NdJ("click",function(){t.CHM(a);const l=t.oxw().$implicit,r=t.oxw();return t.KtG(r.approveRequest(l.id))}),t._uU(2,"check_circle_outline "),t.qZA(),t.BQk()}}function j(e,n){if(1&e&&(t.TgZ(0,"td",24),t.YNc(1,$,3,0,"ng-container",28),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.Q6J("ngIf","PENDING"==a.status)}}function F(e,n){1&e&&t._UZ(0,"tr",30)}function O(e,n){1&e&&t._UZ(0,"tr",31)}function P(e,n){1&e&&(t.TgZ(0,"tr",32)(1,"td",33),t._uU(2,"No data matching the filter "),t.qZA()())}const G=function(){return[15,25,50,75,100]},H=[{path:"",component:(()=>{class e{constructor(a,s,l,r){this.withdrawalService=a,this.ngxService=s,this.matDialog=l,this.toastr=r,this.displayedColumns=["name","email","amount","status","time","action"],this.dataSource=[],this.showLoader=!1;let u=localStorage.getItem("userinfo");u&&(this.parseData=JSON.parse(u))}ngOnInit(){this.initializeFilter(),this.getWithdrawalRequests()}initializeFilter(){this.filter={token:this.parseData.token,page:1,limit:15}}getWithdrawalRequests(){this.showLoader=!0,this.ngxService.start(),this.withdrawalService.getWithdrawalRequests(this.filter).subscribe(a=>{this.dataSource=a.results,this.paginator.length=a.count,this.showLoader=!1},a=>{this.showLoader=!1})}approveRequest(a){this.matDialog.open(N.w,{width:"300px"}).afterClosed().subscribe(s=>{1==s&&this._approveRequest(a)})}_approveRequest(a){this.withdrawalService.approveRequest(a).subscribe(s=>{s&&(this.initializeFilter(),this.getWithdrawalRequests())})}pageChange(a){this.filter.page=a.pageIndex+1,this.filter.limit=a.pageSize,this.getWithdrawalRequests()}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(A),t.Y36(m.LA),t.Y36(g.uw),t.Y36(_._W))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-requests"]],viewQuery:function(a,s){if(1&a&&t.Gf(p.NW,7),2&a){let l;t.iGM(l=t.CRH())&&(s.paginator=l.first)}},decls:30,vars:6,consts:[["class","ngxLoader",4,"ngIf"],[1,"main_container"],[1,"flex","pad-8","header"],[1,"heading"],[1,"spacer"],[2,"margin-top","10px"],["mat-table","",1,"dataTable",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","capital",4,"matCellDef"],["matColumnDef","email"],["mat-cell","",4,"matCellDef"],["matColumnDef","amount"],["matColumnDef","status"],["matColumnDef","time"],["matColumnDef","action"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","cursor-pointer",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["pageSize","15",1,"pagination",3,"pageSizeOptions","page"],[1,"ngxLoader"],[3,"hasProgressBar"],["mat-header-cell",""],["mat-cell","",1,"capital"],["mat-cell",""],["style","color: #f5bb8c;",4,"ngIf","ngIfElse"],["acceptedStatus",""],[2,"color","#f5bb8c"],[4,"ngIf"],["matTooltip","Approve Request",1,"pointer","success",3,"click"],["mat-header-row",""],["mat-row","",1,"cursor-pointer"],[1,"mat-row"],["colspan","5",1,"pad-16",2,"text-align","center"]],template:function(a,s){1&a&&(t.YNc(0,D,2,1,"div",0),t.TgZ(1,"div",1)(2,"div",2)(3,"p",3),t._uU(4,"Withdrawal Requests"),t.qZA(),t._UZ(5,"div",4),t.qZA(),t.TgZ(6,"div",5)(7,"table",6),t.ynx(8,7),t.YNc(9,U,2,0,"th",8),t.YNc(10,Y,2,2,"td",9),t.BQk(),t.ynx(11,10),t.YNc(12,y,2,0,"th",8),t.YNc(13,S,2,1,"td",11),t.BQk(),t.ynx(14,12),t.YNc(15,W,2,0,"th",8),t.YNc(16,I,2,1,"td",11),t.BQk(),t.ynx(17,13),t.YNc(18,M,2,0,"th",8),t.YNc(19,E,4,2,"td",11),t.BQk(),t.ynx(20,14),t.YNc(21,L,2,0,"th",8),t.YNc(22,z,3,4,"td",11),t.BQk(),t.ynx(23,15),t.YNc(24,J,2,0,"th",8),t.YNc(25,j,2,1,"td",11),t.BQk(),t.YNc(26,F,1,0,"tr",16),t.YNc(27,O,1,0,"tr",17),t.YNc(28,P,3,0,"tr",18),t.qZA(),t.TgZ(29,"mat-paginator",19),t.NdJ("page",function(r){return s.pageChange(r)}),t.qZA()()()),2&a&&(t.Q6J("ngIf",s.showLoader),t.xp6(7),t.Q6J("dataSource",s.dataSource),t.xp6(19),t.Q6J("matHeaderRowDef",s.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",s.displayedColumns),t.xp6(2),t.Q6J("pageSizeOptions",t.DdM(5,G)))},dependencies:[c.O5,m.Eo,R.Hw,i.BZ,i.fO,i.as,i.w1,i.Dz,i.nj,i.ge,i.ev,i.XQ,i.Gk,i.Ee,p.NW,q.gM,c.uU],styles:[".main_container[_ngcontent-%COMP%]{padding:0 10px}.usdt[_ngcontent-%COMP%]{font-size:10px;font-weight:700}"]}),e})()}];let V=(()=>{class e{}return e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[C.Bz.forChild(H),C.Bz]}),e})(),X=(()=>{class e{}return e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[c.ez,f.u5,f.UX,m.Js,g.Is,v.lN,R.Ps,w.c,i.p0,p.TU,x.g0,q.AV,V,_.Rh.forRoot()]}),e})()}}]);